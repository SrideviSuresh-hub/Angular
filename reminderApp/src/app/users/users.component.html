<div class="container">
    <div class="user-container">
        <div class="grid">
            <h1 class="heading">User Service</h1>
            <p-button class="pi pi-plus add" (click)="showDailog()"></p-button>
        </div>

        <div class="card">
            <p-table [value]="users" [tableStyle]="{'min-width': '60rem'}">
                <ng-template #header>
                    <tr>
                        <th pSortableColumn="name" style="width:14%">
                            Name <p-sortIcon field="name" />
                        </th>
                        <th pSortableColumn="fname" style="width:14%">
                            First Name <p-sortIcon field="fname" />
                        </th>
                        <th pSortableColumn="lname" style="width:14%">
                            LastName <p-sortIcon field="lname" />
                        </th>
                        <th pSortableColumn="email" style="width:18%">
                            Eail ID <p-sortIcon field="email" />
                        </th>
                        <th pSortableColumn="status" style="width:12%">
                            Status <p-sortIcon field="status" />
                        </th>
                        <th pSortableColumn="admin" style="width:12%">
                            Is Admin <p-sortIcon field="admin" />
                        </th>
                        <th pSortableColumn="datetime" style="width:25%">
                            Created Date Time <p-sortIcon field="datetime" />
                        </th>
                        <th style="width:5%">
                        </th>
                    </tr>
                </ng-template>
                <ng-template #body let-user>
                    <tr>
                        <td>{{ user.username }}</td>
                        <td>{{ user.fname }}</td>
                        <td>{{ user.lname }}</td>
                        <td>{{ user.email }}</td>
                        <td>
                            <p-tag [value]="user.status" [severity]="getSeverity(user.status)" />

                        </td>
                        <td>{{ user.isAdmin }}</td>
                        <td>{{ user.datetime | date:"MM/dd/YYYY HH:MM a"}}</td>
                        <td><i class="fa-regular fa-trash-can"></i></td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>

</div>
<p-dialog header="User Details" [(visible)]="visible" [modal]="true" [style]="{ width: '90vw' }">
    <form #userForm="ngForm" (ngSubmit)="saveUser(userForm)">
      <div class="form-grid">
        <!-- Row 1 -->
        <div>
          <label>User Name</label>
          <input pInputText name="username" [(ngModel)]="user.username" required />
        </div>
        <div>
          <label>First Name</label>
          <input pInputText name="firstName" [(ngModel)]="user.fname" required />
        </div>
        <div>
          <label>Last Name</label>
          <input pInputText name="lastName" [(ngModel)]="user.lname" required />
        </div>
  
        <!-- Row 2 -->
        <div>
          <label>Gender</label>
          <div class="flex gap-2">
            <button type="button" pButton label="Male" (click)="user.gender='Male'" [class.p-button-outlined]="user.gender !== 'Male'" [class.p-button-primary]="user.gender === 'Male'"></button>
            <button type="button" pButton label="Female" (click)="user.gender='Female'" [class.p-button-outlined]="user.gender !== 'Female'" [class.p-button-primary]="user.gender === 'Female'"></button>
            <button type="button" pButton label="Others" (click)="user.gender='Others'" [class.p-button-outlined]="user.gender !== 'Others'" [class.p-button-primary]="user.gender === 'Others'"></button>
          </div>
        </div>
        <div>
          <label>DOB</label>
          <p-calendar [(ngModel)]="user.dob" name="dob" showIcon></p-calendar>
        </div>
        <div>
          <label>Email ID</label>
          <input pInputText name="email" [(ngModel)]="user.email" type="email" required />
        </div>
  
        <!-- Row 3 -->
        <div>
          <label>Address Field 1</label>
          <textarea pInputTextarea rows="2" name="address1" [(ngModel)]="user.address1"></textarea>
        </div>
        <div>
          <label>Address Field 2</label>
          <textarea pInputTextarea rows="2" name="address2" [(ngModel)]="user.address2"></textarea>
        </div>
        <div>
          <label>Country</label>
          <input pInputText name="country" [(ngModel)]="user.country" />
        </div>
  
        <!-- Row 4 -->
        <div>
          <label>State</label>
          <input pInputText name="state" [(ngModel)]="user.state" />
        </div>
        <div>
          <label>Zipcode</label>
          <input pInputText name="zipcode" [(ngModel)]="user.zipcode" />
        </div>
        <div>
          <label>Time Zone</label>
          <p-dropdown [options]="timezones" [(ngModel)]="user.timezone" name="timezone"></p-dropdown>
        </div>
  
        <!-- Row 5 -->
        <div>
          <label>Locale</label>
          <p-dropdown [options]="locales" [(ngModel)]="user.locale" name="locale"></p-dropdown>
        </div>
        <div>
          <label>Upload User Image</label><br />
          <input type="file" (change)="onImageUpload($event)" />
        </div>
        <div class="flex align-items-center gap-2">
          <label>Is Admin</label>
          <p-checkbox [(ngModel)]="user.isAdmin" name="isAdmin" binary="true"></p-checkbox>
        </div>
      </div>
  
      <!-- Buttons -->
      <div class="flex justify-content-end gap-2 mt-4">
        <button pButton label="Cancel" class="p-button-secondary" (click)="visible = false"></button>
        <button type="submit" pButton label="Save" class="p-button-primary" [disabled]="!userForm.form.valid"></button>
      </div>
    </form>
  </p-dialog>
  